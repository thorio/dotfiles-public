---
# zsh and common utilities

- name: shell
  gather_facts: false
  hosts: all
  tasks:
    - name: install packages
      become: true
      apt:
        pkg:
          - zsh
          - curl
          - wget
          - git
          - git-delta
          - vim
          - grep
          - fzf
          - gzip
          - htop
          - bat
          - eza

    - name: get current user
      command: whoami
      register: current_user
      changed_when: false

    - name: set user's shell to zsh
      become: true
      user:
        name: "{{ current_user.stdout }}"
        shell: /bin/zsh
